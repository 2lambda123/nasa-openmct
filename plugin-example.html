<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-type" content="text/html; charset=utf-8">
  <title>Implementing a basic plugin</title>
  <script src="dist/main.js"></script>
</head>
<body>
<script>

    function WebPlugin(websites) {
        this.websites = websites;

        var ROOTS = websites.reduce(function (rootMap, website) {
            rootMap[website] = {
                namespace: website,
                identifier: 'page'
            };
            return rootMap;
        }, {});

        function installPlugin(MCT) {
            Object.keys(ROOTS).forEach(function (rootUrl) {
                MCT.Objects.addRoot(ROOTS[rootUrl]);
                MCT.Objects.addProvider(rootUrl, {
                    get: function () {
                        return Promise.resolve({
                            type: 'example.page',
                            url: rootUrl,
                            name: rootUrl
                        });
                    }
                });
            });
        }

        return installPlugin;
    }

    var myWebPlugin = WebPlugin([
        'http://www.wikipedia.org/',
        'http://nasa.github.io/openmct'
    ]);

    MCT.install(myWebPlugin);

    MCT.run();
</script>
</body>
</html>
